<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Form by Styliani Kalogirou</title>
</head>
<style>
    body {
        margin: 0;
        padding: 0;
        background-color: #FFFFFF;
        font-family: Arial, Helvetica, sans-serif;
    }
    .container {
        max-width: 600px;
        margin: 20px 0 20px 20px; 
        padding: 20px;
    }
    h1 {
        text-align: center;
        font-size: 30px;
    }
    h3 {
        font-size: 20px;
    }
    form {
        display: grid;
        gap: 10px;
    }
    form label {
        padding: 10px;
        font-size: 16px;
    }
    form input, form select {
        padding: 10px;
        font-size: 16px;
        border: 1px solid #adacac;
        border-radius: 4px;
    }
    .checkboxes {
        font-size: 16px;
        display: flex;
        gap: 10px;
    }
    button[type="submit"] {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        margin-top: 10px;
        cursor: pointer;
        background-color: lightgray;
        border: none;
        border-radius: 4px;
    }
    .error {
        color: red;
        font-size: 14px;
        margin-top: 5px;
        display: none;
    }
     table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            display: none; 
        }
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        .no-data {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            color: #555;
            display: none; 
        }
        @media (max-width: 600px) {
            table {
                display: block;
                overflow-x: auto;
                white-space: nowrap; 
            }
        }
</style>
<body>
    <div class="container">
        <h1>Form by SK</h1>
        <h3>Add your data and export it all in JSON format</h3>

        <form id="form">
            <label for="name">Name:</label>
            <input type="text" id="name" required>

            <label for="surname">Surname:</label>
            <input type="text" id="surname" required>

            <label for="email">Email:</label>
            <input type="email" id="email" required>
            <span class="error" id="emailError">Please enter a valid email</span>

            <label for="age">Age:</label>
            <input type="number" id="age" max="120" required>

            <label for="color">Favorite Color:</label>
            <select id="color" required>
                <option value="red">Red</option>
                <option value="green">Green</option>
                <option value="blue">Blue</option>
                <option value="white">White</option>
                <option value="black">Black</option>
            </select>

            <label for="checkbox">Contact Preference:</label>
            <div class="checkboxes">
                <input type="checkbox" id="contactEmail" value="email">
                <label>by Email</label>
                <input type="checkbox" id="contactPhone" value="phone">
                <label>by Phone Call</label>
                <input type="checkbox" id="contactSMS" value="sms">
                <label>via SMS</label>
                <span class="error" id="contactError">Please select at least one contact method.</span>
            </div>

            <button type="submit">Submit</button>
        </form>

        <div id="dataContainer">
            <table id="usersTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Surname</th>
                        <th>Email</th>
                        <th>Age</th>
                        <th>Favorite Color</th>
                        <th>Contact Preferences</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
            <div class="no-data" id="noDataMessage">No data available.</div>
        </div>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const userForm = document.getElementById("form");
            const usersTable = document.getElementById("usersTable");
            const tableBody = document.getElementById("tableBody");
            const noDataMessage = document.getElementById("noDataMessage");

            // form validations 
            userForm.addEventListener("submit", (e) => {
                e.preventDefault();
                let validationError = false;
                document.getElementById('contactError').style.display = 'none';
                document.getElementById('emailError').style.display = 'none';

                const name = document.getElementById("name").value;
                const surname = document.getElementById("surname").value;
                const email = document.getElementById("email").value;
                const age = document.getElementById("age").value;
                const color = document.getElementById("color").value;
                const contactPreferences = Array.from(userForm.querySelectorAll("input[type='checkbox']:checked"))
                                                .map(checkbox => checkbox.value);

                // validate inputs
               
                if (!validateEmail(email)) {
                    document.getElementById('emailError').style.display = 'block';
                    validationError = true;
                }
                
                if (contactPreferences.length === 0) {
                    document.getElementById('contactError').style.display = 'block';
                    validationError = true;
                }
                if (validationError) return;

                //create table
                const newRow = tableBody.insertRow();
                newRow.insertCell(0).innerText = name;
                newRow.insertCell(1).innerText = surname;
                newRow.insertCell(2).innerText = email;
                newRow.insertCell(3).innerText = age;
                newRow.insertCell(4).innerText = color;
                newRow.insertCell(5).innerText = contactPreferences.join(", ");
                
                // delete button
                const deleteCell = newRow.insertCell(6);
                const deleteButton = document.createElement("button");
                deleteButton.innerText = "Delete";
                deleteButton.style.backgroundColor = "red";
                deleteButton.style.color = "white";
                deleteButton.style.border = "none";
                deleteButton.style.borderRadius = "4px";
                deleteButton.style.cursor = "pointer";
                deleteButton.onclick = () => {
                    tableBody.deleteRow(newRow.rowIndex - 1);
                    checkIfTableIsEmpty();
                };
                deleteCell.appendChild(deleteButton);

                // show table and hide "No data" message if there are users
                usersTable.style.display = 'table';
                noDataMessage.style.display = 'none';

                // reset form
                userForm.reset();

            });

            function validateEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }
            function checkIfTableIsEmpty() {
                if (tableBody.rows.length === 0) {
                    //hide the table and show the no data message
                    usersTable.style.display = 'none'; 
                    noDataMessage.style.display = 'block'; 
                }
            }
        });
    </script>
</body>
</html>
